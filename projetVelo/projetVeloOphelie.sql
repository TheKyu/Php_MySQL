-- MySQL Script generated by MySQL Workbench
-- Fri Jan 17 11:38:08 2020
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema projetVeloOphelie
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `projetVeloOphelie` ;

-- -----------------------------------------------------
-- Schema projetVeloOphelie
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `projetVeloOphelie` DEFAULT CHARACTER SET utf8 ;
USE `projetVeloOphelie` ;

-- -----------------------------------------------------
-- Table `projetVeloOphelie`.`TypeUsers`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `projetVeloOphelie`.`TypeUsers` ;

CREATE TABLE IF NOT EXISTS `projetVeloOphelie`.`TypeUsers` (
  `idTypeUsers` INT NOT NULL AUTO_INCREMENT,
  `userType` VARCHAR(45) NULL,
  PRIMARY KEY (`idTypeUsers`),
  UNIQUE INDEX `idTypeUsers_UNIQUE` (`idTypeUsers` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `projetVeloOphelie`.`Produits`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `projetVeloOphelie`.`Produits` ;

CREATE TABLE IF NOT EXISTS `projetVeloOphelie`.`Produits` (
  `idProduits` INT NOT NULL AUTO_INCREMENT,
  `typeProduit` VARCHAR(45) NULL,
  PRIMARY KEY (`idProduits`),
  UNIQUE INDEX `idProduits_UNIQUE` (`idProduits` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `projetVeloOphelie`.`PayementTypes`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `projetVeloOphelie`.`PayementTypes` ;

CREATE TABLE IF NOT EXISTS `projetVeloOphelie`.`PayementTypes` (
  `idPayementTypes` INT NOT NULL AUTO_INCREMENT,
  `typePayement` VARCHAR(45) NULL,
  PRIMARY KEY (`idPayementTypes`),
  UNIQUE INDEX `idPayementTypes_UNIQUE` (`idPayementTypes` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `projetVeloOphelie`.`Payements`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `projetVeloOphelie`.`Payements` ;

CREATE TABLE IF NOT EXISTS `projetVeloOphelie`.`Payements` (
  `idPayements` INT NOT NULL AUTO_INCREMENT,
  `bankName` VARCHAR(45) NULL,
  `montantHT` INT NULL,
  `tva` INT NULL,
  `PayementTypes_idPayementTypes` INT NOT NULL,
  PRIMARY KEY (`idPayements`, `PayementTypes_idPayementTypes`),
  UNIQUE INDEX `idPayements_UNIQUE` (`idPayements` ASC),
  INDEX `fk_Payements_PayementTypes1_idx` (`PayementTypes_idPayementTypes` ASC),
  CONSTRAINT `fk_Payements_PayementTypes1`
    FOREIGN KEY (`PayementTypes_idPayementTypes`)
    REFERENCES `projetVeloOphelie`.`PayementTypes` (`idPayementTypes`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `projetVeloOphelie`.`GPSCoord`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `projetVeloOphelie`.`GPSCoord` ;

CREATE TABLE IF NOT EXISTS `projetVeloOphelie`.`GPSCoord` (
  `idGPSCoord` INT NOT NULL AUTO_INCREMENT,
  `bornesLatitude` INT NULL,
  `bornesLongitude` INT NULL,
  PRIMARY KEY (`idGPSCoord`),
  UNIQUE INDEX `idGPSCoord_UNIQUE` (`idGPSCoord` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `projetVeloOphelie`.`Bornes`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `projetVeloOphelie`.`Bornes` ;

CREATE TABLE IF NOT EXISTS `projetVeloOphelie`.`Bornes` (
  `idBornes` INT NOT NULL AUTO_INCREMENT,
  `borneName` VARCHAR(45) NULL,
  `GPSCoord_idGPSCoord` INT NOT NULL,
  PRIMARY KEY (`idBornes`, `GPSCoord_idGPSCoord`),
  UNIQUE INDEX `idBornes_UNIQUE` (`idBornes` ASC),
  INDEX `fk_Bornes_GPSCoord1_idx` (`GPSCoord_idGPSCoord` ASC),
  CONSTRAINT `fk_Bornes_GPSCoord1`
    FOREIGN KEY (`GPSCoord_idGPSCoord`)
    REFERENCES `projetVeloOphelie`.`GPSCoord` (`idGPSCoord`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `projetVeloOphelie`.`Paniers`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `projetVeloOphelie`.`Paniers` ;

CREATE TABLE IF NOT EXISTS `projetVeloOphelie`.`Paniers` (
  `idPaniers` INT NOT NULL AUTO_INCREMENT,
  `quantity` INT NULL,
  `Produits_idProduits` INT NOT NULL,
  `Payements_idPayements` INT NOT NULL,
  `Bornes_idBornes` INT NOT NULL,
  `Bornes_GPSCoord_idGPSCoord` INT NOT NULL,
  PRIMARY KEY (`idPaniers`, `Produits_idProduits`, `Payements_idPayements`, `Bornes_idBornes`, `Bornes_GPSCoord_idGPSCoord`),
  UNIQUE INDEX `idPaniers_UNIQUE` (`idPaniers` ASC),
  INDEX `fk_Paniers_Produits1_idx` (`Produits_idProduits` ASC),
  INDEX `fk_Paniers_Payements1_idx` (`Payements_idPayements` ASC),
  INDEX `fk_Paniers_Bornes1_idx` (`Bornes_idBornes` ASC, `Bornes_GPSCoord_idGPSCoord` ASC),
  CONSTRAINT `fk_Paniers_Produits1`
    FOREIGN KEY (`Produits_idProduits`)
    REFERENCES `projetVeloOphelie`.`Produits` (`idProduits`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_Paniers_Payements1`
    FOREIGN KEY (`Payements_idPayements`)
    REFERENCES `projetVeloOphelie`.`Payements` (`idPayements`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_Paniers_Bornes1`
    FOREIGN KEY (`Bornes_idBornes` , `Bornes_GPSCoord_idGPSCoord`)
    REFERENCES `projetVeloOphelie`.`Bornes` (`idBornes` , `GPSCoord_idGPSCoord`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `projetVeloOphelie`.`ZipCodes`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `projetVeloOphelie`.`ZipCodes` ;

CREATE TABLE IF NOT EXISTS `projetVeloOphelie`.`ZipCodes` (
  `idZipCodes` INT NOT NULL AUTO_INCREMENT,
  `city` VARCHAR(45) NULL,
  `zipCode` VARCHAR(45) NULL,
  `country` VARCHAR(45) NULL,
  PRIMARY KEY (`idZipCodes`),
  UNIQUE INDEX `idZipCodes_UNIQUE` (`idZipCodes` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `projetVeloOphelie`.`Address`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `projetVeloOphelie`.`Address` ;

CREATE TABLE IF NOT EXISTS `projetVeloOphelie`.`Address` (
  `idAddress` INT NOT NULL AUTO_INCREMENT,
  `streetNb` INT NULL,
  `streetNbComplement` VARCHAR(45) NULL,
  `streetName` VARCHAR(45) NULL,
  `streetNameComplement` VARCHAR(45) NULL,
  `ZipCodes_idZipCodes` INT NOT NULL,
  PRIMARY KEY (`idAddress`, `ZipCodes_idZipCodes`),
  UNIQUE INDEX `idAddress_UNIQUE` (`idAddress` ASC),
  INDEX `fk_Address_ZipCodes1_idx` (`ZipCodes_idZipCodes` ASC),
  CONSTRAINT `fk_Address_ZipCodes1`
    FOREIGN KEY (`ZipCodes_idZipCodes`)
    REFERENCES `projetVeloOphelie`.`ZipCodes` (`idZipCodes`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `projetVeloOphelie`.`Users`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `projetVeloOphelie`.`Users` ;

CREATE TABLE IF NOT EXISTS `projetVeloOphelie`.`Users` (
  `idUsers` INT NOT NULL AUTO_INCREMENT,
  `lastName` VARCHAR(45) NULL,
  `firstName` VARCHAR(45) NULL,
  `birthdate` DATE NULL,
  `email` VARCHAR(45) NULL,
  `userID` VARCHAR(45) NULL,
  `mdp` VARCHAR(45) NULL,
  `TypeUsers_idTypeUsers` INT NOT NULL,
  `Paniers_idPaniers` INT NOT NULL,
  `Address_idAddress` INT NOT NULL,
  `Address_ZipCodes_idZipCodes` INT NOT NULL,
  PRIMARY KEY (`idUsers`, `TypeUsers_idTypeUsers`, `Paniers_idPaniers`, `Address_idAddress`, `Address_ZipCodes_idZipCodes`),
  UNIQUE INDEX `idUsers_UNIQUE` (`idUsers` ASC),
  INDEX `fk_Users_TypeUsers1_idx` (`TypeUsers_idTypeUsers` ASC),
  INDEX `fk_Users_Paniers1_idx` (`Paniers_idPaniers` ASC),
  INDEX `fk_Users_Address1_idx` (`Address_idAddress` ASC, `Address_ZipCodes_idZipCodes` ASC),
  CONSTRAINT `fk_Users_TypeUsers1`
    FOREIGN KEY (`TypeUsers_idTypeUsers`)
    REFERENCES `projetVeloOphelie`.`TypeUsers` (`idTypeUsers`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_Users_Paniers1`
    FOREIGN KEY (`Paniers_idPaniers`)
    REFERENCES `projetVeloOphelie`.`Paniers` (`idPaniers`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_Users_Address1`
    FOREIGN KEY (`Address_idAddress` , `Address_ZipCodes_idZipCodes`)
    REFERENCES `projetVeloOphelie`.`Address` (`idAddress` , `ZipCodes_idZipCodes`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `projetVeloOphelie`.`TypeUsers`
-- -----------------------------------------------------
START TRANSACTION;
USE `projetVeloOphelie`;
INSERT INTO `projetVeloOphelie`.`TypeUsers` (`idTypeUsers`, `userType`) VALUES (1, 'admin');
INSERT INTO `projetVeloOphelie`.`TypeUsers` (`idTypeUsers`, `userType`) VALUES (2, 'client');

COMMIT;


-- -----------------------------------------------------
-- Data for table `projetVeloOphelie`.`Produits`
-- -----------------------------------------------------
START TRANSACTION;
USE `projetVeloOphelie`;
INSERT INTO `projetVeloOphelie`.`Produits` (`idProduits`, `typeProduit`) VALUES (1, 'veloelectrique');
INSERT INTO `projetVeloOphelie`.`Produits` (`idProduits`, `typeProduit`) VALUES (2, 'veloclassique');

COMMIT;


-- -----------------------------------------------------
-- Data for table `projetVeloOphelie`.`PayementTypes`
-- -----------------------------------------------------
START TRANSACTION;
USE `projetVeloOphelie`;
INSERT INTO `projetVeloOphelie`.`PayementTypes` (`idPayementTypes`, `typePayement`) VALUES (1, 'cb');
INSERT INTO `projetVeloOphelie`.`PayementTypes` (`idPayementTypes`, `typePayement`) VALUES (2, 'paypal');

COMMIT;


-- -----------------------------------------------------
-- Data for table `projetVeloOphelie`.`Payements`
-- -----------------------------------------------------
START TRANSACTION;
USE `projetVeloOphelie`;
INSERT INTO `projetVeloOphelie`.`Payements` (`idPayements`, `bankName`, `montantHT`, `tva`, `PayementTypes_idPayementTypes`) VALUES (1, 'caisse d\'epargne', 500, 20, 1);
INSERT INTO `projetVeloOphelie`.`Payements` (`idPayements`, `bankName`, `montantHT`, `tva`, `PayementTypes_idPayementTypes`) VALUES (2, 'laposte', 700, 20, 2);

COMMIT;


-- -----------------------------------------------------
-- Data for table `projetVeloOphelie`.`GPSCoord`
-- -----------------------------------------------------
START TRANSACTION;
USE `projetVeloOphelie`;
INSERT INTO `projetVeloOphelie`.`GPSCoord` (`idGPSCoord`, `bornesLatitude`, `bornesLongitude`) VALUES (1, 50, 25);
INSERT INTO `projetVeloOphelie`.`GPSCoord` (`idGPSCoord`, `bornesLatitude`, `bornesLongitude`) VALUES (2, 62, 100);
INSERT INTO `projetVeloOphelie`.`GPSCoord` (`idGPSCoord`, `bornesLatitude`, `bornesLongitude`) VALUES (3, 159, 951);

COMMIT;


-- -----------------------------------------------------
-- Data for table `projetVeloOphelie`.`Bornes`
-- -----------------------------------------------------
START TRANSACTION;
USE `projetVeloOphelie`;
INSERT INTO `projetVeloOphelie`.`Bornes` (`idBornes`, `borneName`, `GPSCoord_idGPSCoord`) VALUES (1, 'lol', 1);
INSERT INTO `projetVeloOphelie`.`Bornes` (`idBornes`, `borneName`, `GPSCoord_idGPSCoord`) VALUES (2, 'mdr', 2);
INSERT INTO `projetVeloOphelie`.`Bornes` (`idBornes`, `borneName`, `GPSCoord_idGPSCoord`) VALUES (3, 'xptdr', 3);

COMMIT;


-- -----------------------------------------------------
-- Data for table `projetVeloOphelie`.`Paniers`
-- -----------------------------------------------------
START TRANSACTION;
USE `projetVeloOphelie`;
INSERT INTO `projetVeloOphelie`.`Paniers` (`idPaniers`, `quantity`, `Produits_idProduits`, `Payements_idPayements`, `Bornes_idBornes`, `Bornes_GPSCoord_idGPSCoord`) VALUES (1, 3, 1, 1, 1, 1);
INSERT INTO `projetVeloOphelie`.`Paniers` (`idPaniers`, `quantity`, `Produits_idProduits`, `Payements_idPayements`, `Bornes_idBornes`, `Bornes_GPSCoord_idGPSCoord`) VALUES (2, 5, 2, 2, 3, 3);

COMMIT;


-- -----------------------------------------------------
-- Data for table `projetVeloOphelie`.`ZipCodes`
-- -----------------------------------------------------
START TRANSACTION;
USE `projetVeloOphelie`;
INSERT INTO `projetVeloOphelie`.`ZipCodes` (`idZipCodes`, `city`, `zipCode`, `country`) VALUES (1, 'mericourt', '62680', 'france');
INSERT INTO `projetVeloOphelie`.`ZipCodes` (`idZipCodes`, `city`, `zipCode`, `country`) VALUES (2, 'avion', '55663', 'japan');

COMMIT;


-- -----------------------------------------------------
-- Data for table `projetVeloOphelie`.`Address`
-- -----------------------------------------------------
START TRANSACTION;
USE `projetVeloOphelie`;
INSERT INTO `projetVeloOphelie`.`Address` (`idAddress`, `streetNb`, `streetNbComplement`, `streetName`, `streetNameComplement`, `ZipCodes_idZipCodes`) VALUES (1, 18, NULL, 'impasse pasteur', NULL, 1);
INSERT INTO `projetVeloOphelie`.`Address` (`idAddress`, `streetNb`, `streetNbComplement`, `streetName`, `streetNameComplement`, `ZipCodes_idZipCodes`) VALUES (2, 5, 'bis', 'rue boolean', 'appartement 2 ', 2);

COMMIT;


-- -----------------------------------------------------
-- Data for table `projetVeloOphelie`.`Users`
-- -----------------------------------------------------
START TRANSACTION;
USE `projetVeloOphelie`;
INSERT INTO `projetVeloOphelie`.`Users` (`idUsers`, `lastName`, `firstName`, `birthdate`, `email`, `userID`, `mdp`, `TypeUsers_idTypeUsers`, `Paniers_idPaniers`, `Address_idAddress`, `Address_ZipCodes_idZipCodes`) VALUES (1, 'bolle', 'ophelie', '1997-12-02', 'no@yes.com', 'thekyu', 'lol', 1, 1, 1, 1);
INSERT INTO `projetVeloOphelie`.`Users` (`idUsers`, `lastName`, `firstName`, `birthdate`, `email`, `userID`, `mdp`, `TypeUsers_idTypeUsers`, `Paniers_idPaniers`, `Address_idAddress`, `Address_ZipCodes_idZipCodes`) VALUES (2, 'lol', 'laurine', '1997-01-12', 'yes@no.com', 'frifre', 'mdr', 2, 2, 2, 2);

COMMIT;

